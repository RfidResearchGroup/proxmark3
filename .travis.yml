# Travis-CI Build for RfidResearchGroup/Proxmark3
language: c

#default linux build env is: xenial
compiler: gcc

# move some env variables to homebrew env
env:
  global:
    - HOMEBREW_TRAVIS_BRANCH=$TRAVIS_BRANCH
    - HOMEBREW_TRAVIS_COMMIT=$TRAVIS_COMMIT

# Test on Linux and MacOS
matrix:
  include:
    - os: osx
      osx_image: xcode11
      env: MAKE_PARAMS='PLATFORM_EXTRAS='

addons:
  homebrew:
    packages:
# update trick to fix https://travis-ci.community/t/macos-build-fails-because-of-homebrew-bundle-unknown-command/7296/14
#    update: true

install:
  echo "install skipped"

script:
## start and run a test script
  if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
    ./pm3test.sh;  
  fi
